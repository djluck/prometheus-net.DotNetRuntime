name: CI

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v1
    - name: Build and test (using v2.* of prometheus-net)
      uses: docker://mcr.microsoft.com/dotnet/core/sdk:3.0
      with:
        args: dotnet test -c "DebugV2" src/
    - name: Build and test (using v3.* of prometheus-net)
      uses: docker://mcr.microsoft.com/dotnet/core/sdk:3.0
      with:
        args: dotnet test -c "DebugV3" src/prometheus-net.DotNetRuntime.sln
